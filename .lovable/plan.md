

# ุฎุทุฉ ุชุทููุฑ ุตูุญุฉ ุงููุฎุชุจุฑ (ุงูููุงุฆูุฉ)

## ููุฎุต ุงูุชูููุฐ

ุณูุชู ุชูููุฐ 4 ููุงู ุฑุฆูุณูุฉ:

| # | ุงููููุฉ | ุงููุตู |
|---|--------|-------|
| 1 | ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุฅุตูุงุญ ุฎุทุฃ `text = uuid` ูู 4 ุฃูุงูู |
| 2 | ุฃูุถุงุน ุงูุนุฑุถ | ุฅุถุงูุฉ Grid / List / Table ููุนููุงุช ูุงููุชุงุฆุฌ |
| 3 | ููุงุชุฑ ุงูุชุงุฑูุฎ | "ูู ุชุงุฑูุฎ - ุฅูู ุชุงุฑูุฎ" |
| 4 | ููุทู "ุบูุฑ ูุณุชูู" | ุงูุนููุงุช `draft` ุชุธูุฑ ูู "ุบูุฑ ูุณุชูู" |

---

## ุงูุฌุฒุก ุงูุฃูู: ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Migration)

### ุงูุฅุตูุงุญุงุช ุงููุทููุจุฉ

| ุงูุฏุงูุฉ | ุงูุณุทุฑ | ุงูุชุบููุฑ |
|--------|-------|---------|
| `can_access_shared_resource` | 52 | `_resource_id::text` โ `_resource_id` |
| `get_granted_data` (lab) | 205 | `lr.id::text` โ `lr.id` |
| `get_granted_data` (vet) | 221 | `vt.id::text` โ `vt.id` |
| `get_granted_data` (breeding) | 237 | `ba.id::text` โ `ba.id` |

---

## ุงูุฌุฒุก ุงูุซุงูู: ุฃูุถุงุน ุงูุนุฑุถ

### ุงููููุงุช ุงูุฌุฏูุฏุฉ

**SamplesTable.tsx** - ุฌุฏูู ุงูุนููุงุช:
| ุงูุนููุฏ | ุงููุญุชูู |
|--------|---------|
| # | ุฑูู ุชุณูุณูู |
| ุงูุนููู | ุงุณู ุงูุนููู |
| ุงูุฎูู | ุงุณู ุงูุฎูู |
| ุฑูู ุงูุนููุฉ | Physical Sample ID |
| ุงูุญุงูุฉ | Badge |
| ุชุงุฑูุฎ ุงูุฌูุน | Collection Date |
| ุงูููุงูุจ | ุนุฏุฏ ุงูููุงูุจ |
| ุงูุฅุฌุฑุงุกุงุช | ุฃุฒุฑุงุฑ |

**ResultsTable.tsx** - ุฌุฏูู ุงููุชุงุฆุฌ:
| ุงูุนููุฏ | ุงููุญุชูู |
|--------|---------|
| # | ุฑูู ุชุณูุณูู |
| ุงูุฎูู | ุงุณู ุงูุฎูู |
| ุงููุงูุจ | Template Name |
| ุงูุญุงูุฉ | Status Badge |
| ุงูุนูุงูุงุช | Flags Badge |
| ุชุงุฑูุฎ ุงูุฅูุดุงุก | Created At |
| ุงูุฅุฌุฑุงุกุงุช | ุฃุฒุฑุงุฑ |

### ุงูุชุบููุฑุงุช ูู ุงููููุงุช ุงูููุฌูุฏุฉ

**SamplesList.tsx & ResultsList.tsx:**
- ุงุณุชูุฑุงุฏ `ViewSwitcher` ู `useViewPreference`
- ุฅุถุงูุฉ ViewSwitcher ูู ุงูู header
- ุนุฑุถ Table/Grid/List ุญุณุจ ุงูุงุฎุชูุงุฑ

---

## ุงูุฌุฒุก ุงูุซุงูุซ: ููุงุชุฑ ุงูุชุงุฑูุฎ

### ุงูุชุบููุฑุงุช ูู useLabSamples.ts

```typescript
interface LabSampleFilters {
  dateFrom?: string;  // ุฌุฏูุฏ
  dateTo?: string;    // ุฌุฏูุฏ
}
```

### ูุงุฌูุฉ ุงููุณุชุฎุฏู

```text
โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโ
โ ูู ุชุงุฑูุฎ    ๐ โ  โ ุฅูู ุชุงุฑูุฎ   ๐ โ  โ ูุณุญ โ
โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโ
```

---

## ุงูุฌุฒุก ุงูุฑุงุจุน: ููุทู "ุบูุฑ ูุณุชูู"

### ุงูุชุบููุฑุงุช

| ุงูุชุจููุจุฉ | ุงูููุชุฑ ุงูุฌุฏูุฏ |
|----------|---------------|
| ุบูุฑ ูุณุชูู | `status = 'draft'` |
| ูุณุชูู | `status != 'draft'` |

### ุฒุฑ "ุงุณุชูุงู"

ุนูุฏ ุงูุถุบุท:
1. `status` โ `accessioned`
2. `received_by` โ ุงููุณุชุฎุฏู ุงูุญุงูู
3. `received_at` โ ุงูููุช ุงูุญุงูู

---

## ุงููููุงุช ุงููุชุฃุซุฑุฉ

| ุงูููู | ููุน ุงูุชุบููุฑ |
|-------|-------------|
| `supabase/migrations/` | Migration ุฌุฏูุฏ |
| `src/components/laboratory/SamplesList.tsx` | ุชุนุฏูู |
| `src/components/laboratory/ResultsList.tsx` | ุชุนุฏูู |
| `src/components/laboratory/SamplesTable.tsx` | **ุฌุฏูุฏ** |
| `src/components/laboratory/ResultsTable.tsx` | **ุฌุฏูุฏ** |
| `src/components/laboratory/index.ts` | ุชุนุฏูู |
| `src/hooks/laboratory/useLabSamples.ts` | ุชุนุฏูู |
| `src/hooks/laboratory/useLabResults.ts` | ุชุนุฏูู |
| `src/i18n/locales/en.ts` | ุชุนุฏูู |
| `src/i18n/locales/ar.ts` | ุชุนุฏูู |

---

## ููุงุชูุญ ุงูุชุฑุฌูุฉ ุงูุฌุฏูุฏุฉ

```text
laboratory.filters.fromDate
laboratory.filters.toDate
laboratory.filters.clearDates
laboratory.table.number
laboratory.table.client
laboratory.table.horse
laboratory.table.sampleId
laboratory.table.status
laboratory.table.collectionDate
laboratory.table.templates
laboratory.table.actions
laboratory.table.resultDate
laboratory.table.template
laboratory.table.flags
laboratory.table.createdBy
```

---

## ูุนุงููุฑ ุงููุจูู

| ุงูุงุฎุชุจุงุฑ | ุงููุชูุฌุฉ |
|----------|---------|
| ุชุญููู ุงููุชุงุฆุฌ | ูุนูู ุจุฏูู ุฃุฎุทุงุก |
| ุญูุธ ุงููุชุงุฆุฌ | ูุนูู ุจุฏูู ุฃุฎุทุงุก |
| ูุดุงุฑูุฉ ุงูุจูุงูุงุช | ุชุนูู ุจุดูู ุตุญูุญ |
| Grid/List/Table | ุชุนูู ูุชูุญูุธ |
| ููุงุชุฑ ุงูุชุงุฑูุฎ | ุชูุตูู ุจุดูู ุตุญูุญ |
| "ุบูุฑ ูุณุชูู" | ุชุนุฑุถ draft ููุท |
| ุฒุฑ "ุงุณุชูุงู" | ูููู ููู accessioned |

