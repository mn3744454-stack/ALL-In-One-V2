
# خطة حل مشكلة تسجيل الدخول

## ملخص التحقيق

بعد الفحص الشامل، تأكدت من:
- الحساب `testuser12345@test.com` موجود ومؤكد في قاعدة البيانات
- عملية تسجيل الدخول تعمل بشكل صحيح (اختبرتها للتو وحصلت على Status 200)
- كلمة المرور الصحيحة هي `password123`

## السبب المرجح للمشكلة

المشكلة على الأرجح تتعلق بـ **كيفية إدخال كلمة المرور**:
- ربما تكتب الأرقام بشكل عربي (١٢٣) بدلاً من إنجليزي (123)
- أو هناك مسافة في بداية/نهاية كلمة المرور
- أو يتم نسخ كلمة المرور مع حروف غير مرئية

## الحل المقترح

### 1. إضافة ميزة إعادة تعيين كلمة المرور (Forgot Password)

حاليًا الرابط موجود في الصفحة ولكن الصفحة `/forgot-password` غير موجودة. سأقوم بإنشائها.

### الملفات المطلوب إنشاؤها/تعديلها

#### إنشاء ملف جديد: `src/pages/ForgotPassword.tsx`
- صفحة لإدخال البريد الإلكتروني لإرسال رابط إعادة التعيين
- استخدام `supabase.auth.resetPasswordForEmail()`
- رسائل واضحة للمستخدم

#### إنشاء ملف جديد: `src/pages/ResetPassword.tsx`
- صفحة لإدخال كلمة المرور الجديدة
- استخدام `supabase.auth.updateUser()`

#### تعديل `src/App.tsx`
- إضافة المسارات الجديدة `/forgot-password` و `/reset-password`

#### تعديل ملفات الترجمة
- إضافة النصوص العربية والإنجليزية للصفحات الجديدة

## التفاصيل التقنية

### صفحة Forgot Password
```text
المسار: /forgot-password
الوظيفة: يدخل المستخدم بريده الإلكتروني
        → يضغط "إرسال رابط إعادة التعيين"
        → يصل رابط للبريد يوجه لصفحة /reset-password
```

### صفحة Reset Password
```text
المسار: /reset-password
الوظيفة: المستخدم يدخل كلمة مرور جديدة
        → يضغط "تحديث كلمة المرور"
        → يتم تحديث كلمة المرور ويُوجَّه لتسجيل الدخول
```

### إعدادات Supabase المطلوبة
```text
Redirect URL: {window.location.origin}/reset-password
```

## ما يمكنك فعله الآن (قبل تنفيذ الخطة)

**جرب تسجيل الدخول بهذه البيانات بالضبط:**
- البريد: `testuser12345@test.com`
- كلمة المرور: `password123` (تأكد أنها بالأرقام الإنجليزية بدون مسافات)

إذا لم تنجح، وافق على الخطة وسأقوم بإضافة ميزة إعادة تعيين كلمة المرور.
